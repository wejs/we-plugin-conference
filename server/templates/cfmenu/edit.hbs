<div class="row">
  <div class="col-lg-12">
    {{{form-model 'cfmenu' record validationError}}}
  </div>
</div>

<hr>

<h3>{{t 'Links'}}</h3>
<div class="row">
  <div class="col-lg-12 actions">
    <a class="btn btn-default" href="/conference/{{conference.id}}/admin/menu/{{record.id}}/add-link">{{t 'Add'}}</a>
  </div>
  <div class="col-lg-12">
    <form class="cflinkOrderForm" action="/conference/{{conference.id}}/admin/menu/{{record.id}}/sort-links" method="POST">
      <table id="cflinkTable" class="table table-striped table-hover">
        <thead>
          <tr>
            <th we-model-attr="name">{{t 'text'}}</th>
            <th we-model-attr="weight">{{t 'weight'}}</th>
            <th we-model-attr="parent">{{t 'parent'}}</th>
            <th we-model-attr="actions">{{t 'actions'}}</th>
          </tr>
        </thead>
        <tbody>
        {{#each record.links}}
          <tr class="draggable">
            <td>{{#if depth}}<div class="indentation"> </div>{{/if}}
              {{{text}}}
              <input class="id" name="cflink-{{id}}-id" value="{{id}}" type="hidden" />
              <input class="row-depth" name="cflink-{{id}}-depth" value="{{depth}}" type="hidden" />
            </td>
            <td>
              <input class="row-weight" name="cflink-{{id}}-weight" type="text" value="{{weight}}">
            </td>
            <td>
              <input class="row-parent" name="cflink-{{id}}-parent" type="text" value="{{parent}}">
            </td>
            <td>
              <a href="/conference/{{conferenceId}}/admin/menu/{{cfmenuId}}/link/{{id}}" class="btn btn-primary btn-sm">{{t 'Edit'}}</a>
              <a href="/conference/{{conferenceId}}/admin/menu/{{cfmenuId}}/link/{{id}}/delete" class="btn btn-default btn-sm">{{t 'Delete'}}</a>
            </td>
          </tr>
        {{/each}}
        </tbody>
      </table>
      <div class="actions">
        <button class="btn btn-primary">{{t 'order.save.btn'}}</button>
      </div>

      <input name="redirectTo" type="hidden" value="{{req.url}}">
    </form>
  </div>
</div>
<script>$(document).ready(function() {
  we.components.tableDrag('#cflinkTable');
});</script>